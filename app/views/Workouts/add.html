#{extends 'main.html' /}
#{set title:'Add Workout' /}

<script>
  $(function() {
    $('#workout-add').click(function() {
      var start = $('input[name="workout.startTime"]').val()+' '+$('input[name="workout.startDate"]').val();
      $('input[name="workout.start"]').val(start);
      $('#workout-form').submit();
    });
  });
</script>

<h1>Add Workout</h1>
<br>
<form id="workout-form" action="@{Workouts.save}" class="form-horizontal" method="post">
  #{formItem 'workout.type'}
    #{select name: 'workout.type', items: models.Sport.values(), as: 'sport', labelProperty: 'sport.'+sport, value: flash['workout.type']}#{/select}
  #{/formItem}

  #{formItem 'workout.start'}
    <input type="hidden" name="workout.start">
    <div class="input-append date" data-date="${new Date().formatDate()}" data-date-format="dd.mm.yyyy">
      <input class="input-small" type="text" name="workout.startDate" value="${(flash['workout.start'] ?: new Date()).formatDate()}">
      <span class="add-on"><i class="icon-calendar"></i></span>
    </div>
    <div class="input-append bootstrap-timepicker">
      <input name="workout.startTime" class="timepicker input-mini" type="text" data-show-meridian="false" data-show-seconds="true" data-second-step="1" data-minute-step="1" data-default-time="${(flash['workout.start'] ?: new Date()).formatTime()}">
      <span class="add-on"><i class="icon-time"></i></span>
    </div>
  #{/formItem}

  #{formItem 'workout.duration'}
    <div class="input-append bootstrap-timepicker">
      <input name="workout.duration" class="timepicker input-mini" type="text" data-show-meridian="false" data-show-seconds="true" data-second-step="1" data-minute-step="1" data-default-time="${flash['workout.duration'] ?: new Date(0).formatTimeUTC()}">
      <span class="add-on"><i class="icon-time"></i></span>
    </div>
  #{/formItem}

  #{formItem}
    <a href="#" id="workout-add" class="btn">Add Workout</a>
  #{/formItem}
</form>